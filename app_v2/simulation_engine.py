# Contains the simulation engine logic